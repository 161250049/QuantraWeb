<div id="view_stock">
    <div id="k_chart" style="width: 100%; height: 600px;"></div>
</div>

<script type="text/javascript">
    setTimeout(function () {
        var chart = echarts.init(document.getElementById('k_chart'));
        chart.showLoading();
        var code = 1;
        if (app.views.param.code) {
            code = app.views.param.code;
        }
        $.getJSON('/api/stock/stock?code=' + code, function (result) {
            chart.setOption({
                xAxis: {
                    data: result.dates
                },
                yAxis: {
                    scale: true
                },
                dataZoom: [
                    {
                        type: 'inside',
                        start: 90,
                        end: 100
                    },
                    {
                        show: true,
                        type: 'slider'
                    }
                ],
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross'
                    }
                },
                toolbox: {
                    show: true,
                    feature: {
                        dataZoom: {},
                        restore: {},
                        saveAsImage: {}
                    }
                },
                series: [{
                    type: 'candlestick',
                    data: result.data
                }]
            });
            chart.hideLoading();
        });
    }, 0);
</script>